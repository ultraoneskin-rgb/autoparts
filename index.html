<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аналитика автозапчастей</title>

    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f2f2f7;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 320px;
            text-align: center;
        }

        h1 {
            font-size: 22px;
            margin-bottom: 20px;
        }

        input, select, button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 12px;
            border: 1px solid #ddd;
            font-size: 16px;
            box-sizing: border-box;
        }

        button {
            background: #007aff;
            color: white;
            border: none;
            font-weight: 500;
            cursor: pointer;
        }

        button:hover {
            background: #0063cc;
        }

        .hidden {
            display: none;
        }

        .result {
            margin-top: 15px;
            text-align: left;
            font-size: 14px;
        }
    </style>
</head>
<body>

<!-- Экран входа -->
<div class="card" id="loginCard">
    <h1>Вход</h1>
    <input type="password" id="password" placeholder="Введите пароль">
    <button onclick="login()">Войти</button>
    <p id="error" style="color:red;"></p>
</div>

<!-- Основное приложение -->
<div class="card hidden" id="appCard">
    <h1>Аналитика запчастей</h1>

    <select id="brand">
        <option>Выберите марку</option>
        <option>Toyota</option>
        <option>BMW</option>
        <option>Mercedes</option>
        <option>Volkswagen</option>
    </select>

    <select id="model">
        <option>Выберите модель</option>
        <option>Corolla</option>
        <option>Camry</option>
        <option>Golf</option>
        <option>Passat</option>
    </select>

    <select id="engine">
        <option>Выберите модификацию</option>
        <option>1.6 бензин</option>
        <option>2.0 дизель</option>
        <option>2.5 бензин</option>
    </select>

    <button onclick="showAnalytics()">Получить аналитику</button>

    <div class="result" id="result"></div>

    <button onclick="downloadExcel()">Скачать Excel</button>
</div>

<script>
    const SITE_PASSWORD = "Avdeeva_Shalava2007";

    function login() {
        const input = document.getElementById("password").value;
        if (input === SITE_PASSWORD) {
            document.getElementById("loginCard").classList.add("hidden");
            document.getElementById("appCard").classList.remove("hidden");
        } else {
            document.getElementById("error").textContent = "Неверный пароль";
        }
    }

    function showAnalytics() {
    const result = document.getElementById("result");
    result.innerHTML = `
        <b>Популярные запчасти:</b><br><br>
        1. Тормозные колодки — спрос 82%<br>
        Средняя цена: 4 200 ₽<br>
        Рекомендуемая цена продажи: 3 790 ₽<br><br>

        2. Амортизатор передний — спрос 64%<br>
        Средняя цена: 7 500 ₽<br>
        Рекомендуемая цена продажи: 6 790 ₽<br><br>

        3. Рычаг подвески — спрос 51%<br>
        Средняя цена: 8 900 ₽<br>
        Рекомендуемая цена продажи: 7 990 ₽
    `;
}


 function downloadExcel() {
    const data = [
        ["Марка", "Модель", "Модификация", "Запчасть", "Номер", "Сторона", "Спрос", "Средняя цена", "Рекоменд. цена"],
        ["Toyota", "Camry", "2.5 бензин", "Тормозные колодки", "04465-06090", "перед", "82%", "4200 ₽", "3790 ₽"],
        ["Toyota", "Camry", "2.5 бензин", "Амортизатор", "48520-80333", "перед левый", "64%", "7500 ₽", "6790 ₽"],
        ["Toyota", "Camry", "2.5 бензин", "Амортизатор", "48510-80334", "перед правый", "64%", "7500 ₽", "6790 ₽"],
        ["Toyota", "Camry", "2.5 бензин", "Рычаг подвески", "48068-06140", "перед левый", "51%", "8900 ₽", "7990 ₽"]
    ];

    let csvContent = "data:text/csv;charset=utf-8,";
    data.forEach(row => {
        csvContent += row.join(";") + "\n";
    });

    const encodedUri = encodeURI(csvContent);
    const link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "autoparts_analysis.csv");
    document.body.appendChild(link);
    link.click();
}


    }
</script>

</body>
</html>
